<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æµ·å±±ç”Ÿæ…‹åšç‰©é¤¨å°è¦½</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Serif+TC:wght@400;500;700;900&display=swap');
        body { font-family: 'Noto Serif TC', serif; }
        .transition-transform { transition: transform 0.3s ease; }
        #app-content.h-full { height: 100%; }

        /* 1. ã€æ›´æ–°ã€‘é¦–é èƒŒæ™¯åœ–æ¨£å¼ï¼šå°‡èƒŒæ™¯ä½ç½®æ”¹ç‚ºåº•éƒ¨å„ªå…ˆ (bottom center) */
        .landing-bg {
            background-image: url('./landing-bg.jpg'); /* è«‹å°‡æ‚¨çš„èƒŒæ™¯åœ–å‘½åç‚º landing-bg.jpg */
            background-size: cover;
            background-position: bottom center; /* è®“åœ–ç‰‡çš„åº•éƒ¨éƒ¨åˆ†è¢«å„ªå…ˆé¡¯ç¤º */
            background-attachment: fixed;
        }
        
        /* 2. åœ–ç‰‡å¡«æ»¿å®¹å™¨ä¸”è£åˆ‡åº•éƒ¨ (Object-fit: cover) */
        .img-cover-fill {
            object-fit: cover; /* è®“åœ–ç‰‡å¡«æ»¿æ•´å€‹å®¹å™¨ï¼Œå¤šé¤˜éƒ¨åˆ†è£åˆ‡ */
            object-position: center top; /* ç¢ºä¿åœ–ç‰‡çš„é ‚éƒ¨åœ¨å®¹å™¨å…§å¯è¦‹ */
        }
    </style>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'bg-main': '#103632',
                        'bg-card': '#1A4440',
                        'text-light': '#F8FAFC',
                        'secondary': '#94A3B8',
                        'bg-light-card': '#F0F4F8',
                        'text-dark': '#1E293B',
                        'primary': '#34D399',
                        'accent': '#60A5FA',
                    }
                }
            }
        }
    </script>
</head>
<!-- åˆå§‹èƒŒæ™¯ç‚ºæ·±ç¶ è‰² -->
<body class="bg-bg-main text-text-light min-h-screen flex flex-col">

    <!-- å°èˆªåˆ— -->
    <nav class="sticky top-0 z-10 bg-bg-card shadow-xl border-b-2 border-primary/50">
        <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <button id="back-btn" class="flex items-center text-secondary hover:text-accent transition duration-150 hidden" onclick="goBack()">
                    <svg class="h-6 w-6 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path></svg>
                    <span class="text-base font-medium hidden sm:inline">è¿”å›</span>
                </button>
                <div class="flex-shrink-0 flex-grow text-center sm:text-left">
                    <span id="nav-title" class="text-xl font-extrabold text-primary transition duration-300">æµ·å±±ç”Ÿæ…‹åšç‰©é¤¨å°è¦½</span>
                </div>
                <div class="w-12"></div>
            </div>
        </div>
    </nav>

    <!-- ä¸»å…§å®¹ -->
    <main class="flex-grow p-4 sm:p-8 max-w-4xl mx-auto w-full">
        <div id="app-content" class="bg-bg-card p-6 sm:p-10 rounded-3xl shadow-2xl border border-gray-700 min-h-[60vh] transition-transform">
            <!-- å…§å®¹å‹•æ…‹ç”Ÿæˆ -->
        </div>
    </main>

    <!-- é è…³ -->
    <footer class="bg-bg-card/50 py-6 mt-auto border-t border-gray-700">
        <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
            <p class="text-secondary text-sm">&copy; 2025 æµ·å±±ç”Ÿæ…‹åšç‰©é¤¨ã€‚</p>
        </div>
    </footer>

    <!-- JavaScript -->
    <script>
        const MUSEUM_DATA = {
            "æµ·èˆ‡ç”Ÿæ´»": {
                "æµ·å±±æ¼æ¸¯": "æµ·å±±æ¼æ¸¯æ˜¯æ–°ç«¹è‘—åçš„æ¼æ¸¯ä¹‹ä¸€ï¼Œè¦‹è­‰äº†åœ¨åœ°æ¼æ¥­çš„è®Šé·èˆ‡ç™¼å±•ï¼Œæ›´æ˜¯è§€å¯Ÿå¤•é™½èˆ‡æµ·æ™¯çš„çµ•ä½³åœ°é»ã€‚",
                "å®šç½®æ¼å ´": "å®šç½®æ¼å ´æ˜¯ä¸€ç¨®æ°¸çºŒçš„æ¼æ’ˆæ–¹å¼ï¼Œåˆ©ç”¨åœ°åˆ©èˆ‡æ½®æµæ•æ‰æ´„æ¸¸é­šé¡ï¼Œå±•ç¾äº†äººèˆ‡æµ·å…±å­˜çš„æ™ºæ…§ã€‚",
                "é¦™å±±æ¿•åœ°": "é¦™å±±æ¿•åœ°æ˜¯é‡è¦çš„ç”Ÿæ…‹ä¿è­·å€ï¼Œæ“æœ‰è±å¯Œçš„åº•æ£²ç”Ÿç‰©èˆ‡æ°´é³¥è³‡æºï¼Œæ˜¯è‡ªç„¶æ•™è‚²çš„æœ€ä½³å ´åŸŸã€‚"
            },
            "ä¿¡ä»°èˆ‡æ–‡åŒ–": {
                "æ°´è“®å®®": "æ°´è“®å®®æ˜¯ç•¶åœ°é‡è¦çš„ä¿¡ä»°ä¸­å¿ƒï¼Œä¾›å¥‰åª½ç¥–ï¼Œå®ˆè­·è‘—è¨æµ·äººçš„å¹³å®‰ã€‚",
                "é¦™å±±å¤©åå®®": "æ­·å²æ‚ ä¹…çš„é¦™å±±å¤©åå®®ï¼Œå…¶å»ºç¯‰å·¥è—èˆ‡æ­·å²åƒ¹å€¼ä»£è¡¨è‘—å®¢å®¶èˆ‡ç¦ä½¬æ–‡åŒ–èåˆçš„è»Œè·¡ã€‚"
            },
            "åœ°æ–¹ç”¢æ¥­": {
                "èŒ¶èŠ±åœ’": "æ–°ç«¹çš„æ°£å€™é©åˆèŒ¶èŠ±ç”Ÿé•·ï¼ŒèŒ¶èŠ±åœ’ä¸åƒ…æ˜¯è§€å…‰æ™¯é»ï¼Œæ›´æ˜¯é‡è¦çš„èŠ±å‰ç”¢æ¥­åŸºåœ°ã€‚",
                "å’–å•¡è±†": "è¿‘å¹´ä¾†åœ¨åœ°å°è¾²é–‹å§‹ç¨®æ¤ç²¾å“å’–å•¡è±†ï¼Œç™¼å±•å‡ºç¨ç‰¹çš„é¢¨å‘³ã€‚",
                "å®šç½®æ¼å ´": "ï¼ˆå†æ¬¡æåŠï¼‰å®šç½®æ¼å ´é™¤äº†æ˜¯æ¼æ’ˆæ–¹å¼ï¼Œä¹Ÿæ˜¯åœ°æ–¹ç¶“æ¿Ÿç”¢æ¥­çš„ä¸€ç’°ã€‚",
                "é€²å£«ç‰§å ´": "é€²å£«ç‰§å ´æ˜¯çŸ¥åçš„ä¹³ç‰›ç‰§å ´ï¼Œæä¾›æ–°é®®ä¹³è£½å“ã€‚"
            },
            "å¤šæ—ç¾¤å…±æ§‹": {
                "é‚£é­¯ç£": "ã€Œé‚£é­¯ç£ã€ä»£è¡¨è‘—å¤šæ—ç¾¤èåˆçš„ç²¾ç¥ï¼Œæ˜¯ç¤¾å€æ´»å‹•èˆ‡äº¤æµçš„ä¸­å¿ƒã€‚",
                "ç™¼å±•å”æœƒä¸­å¿ƒ": "åœ°æ–¹ç™¼å±•å”æœƒä¸­å¿ƒæ˜¯æ¨å‹•ç¤¾å€ç‡Ÿé€ å’Œæ–‡åŒ–å‚³æ‰¿çš„æ ¸å¿ƒçµ„ç¹”ã€‚"
            }
        };

        const SUB_CATEGORIES_HAISHAN = {
            "åœ°åœ–": "map",
            "è·¯ç·šè¦åŠƒ": "route",
            "è¨˜æ†¶æ•…äº‹": "memory_stories"
        };

        const CATEGORY_ICONS = {
            "æµ·èˆ‡ç”Ÿæ´»": `<svg xmlns="http://www.w3.org/2000/svg" class="w-8 h-8" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 8v8A4 4 0 0 1 8 16V8a4 4 0 0 1 8 0z"/><path d="M12 21V3"/><path d="M17 17l4 4"/><path d="M7 17l-4 4"/></svg>`,
            "ä¿¡ä»°èˆ‡æ–‡åŒ–": `<svg xmlns="http://www.w3.org/2000/svg" class="w-8 h-8" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 3a6 6 0 0 0 9 7.42V20a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V10.42A6 6 0 0 0 12 3Z"/><path d="M9 22V8.5c0-.9.4-1.5 1-1.5c.6 0 1 .4 1 1v4m-1 0h2m-1 0v-4c0-.6.4-1 1-1h2c.6 0 1 .4 1 1v4"/></svg>`,
            "åœ°æ–¹ç”¢æ¥­": `<svg xmlns="http://www.w3.org/2000/svg" class="w-8 h-8" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M7 10v4c0 1.1.9 2 2 2h6c1.1 0 2-.9 2-2v-4"/><path d="M12 16v6"/><path d="M12 2v4"/><path d="M17 6h3a2 2 0 0 1 2 2v2"/><path d="M7 6H4a2 2 0 0 0-2 2v2"/><path d="M22 14v2a2 2 0 0 1-2 2h-3"/><path d="M2 14v2a2 2 0 0 0 2 2h3"/></svg>`,
            "å¤šæ—ç¾¤å…±æ§‹": `<svg xmlns="http://www.w3.org/2000/svg" class="w-8 h-8" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M22 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>`
        };

        const appContent = document.getElementById('app-content');
        const navTitle = document.getElementById('nav-title');
        const backBtn = document.getElementById('back-btn');
        let historyStack = [];
        let currentView = { id: 'landing', data: null };

        function navigateTo(viewId, data = null) {
            // è™•ç†é¦–é èƒŒæ™¯åœ–çš„åˆ‡æ›
            if (viewId === 'landing') {
                document.body.classList.add('landing-bg', 'bg-transparent');
                document.body.classList.remove('bg-bg-main');
            } else {
                document.body.classList.remove('landing-bg', 'bg-transparent');
                document.body.classList.add('bg-bg-main');
            }


            if (currentView.id !== viewId && viewId !== 'landing') {
                historyStack.push({ view: currentView.id, data: currentView.data });
            }
            appContent.classList.remove('flex', 'items-center', 'justify-center', 'h-full');
            appContent.innerHTML = '';
            currentView.id = viewId;
            currentView.data = data;

            switch (viewId) {
                case 'landing': renderLandingView(); break;
                case 'home': renderHomeView(); break;
                case 'sub_category': renderSubCategoryView(data); break;
                case 'map': renderMapView(data); break;
                case 'route': renderRouteView(data); break;
                case 'category': renderCategoryView(data); break;
                case 'detail': renderDetailView(data); break;
                default: renderLandingView();
            }
            updateNavigation(viewId, data);
        }

        function goBack() {
            if (historyStack.length > 0) {
                const previousState = historyStack.pop();
                currentView.id = previousState.view;
                currentView.data = previousState.data;
                appContent.classList.remove('flex', 'items-center', 'justify-center', 'h-full');
                appContent.innerHTML = '';
                
                // è™•ç†é¦–é èƒŒæ™¯åœ–çš„åˆ‡æ› (è¿”å›æ™‚)
                if (currentView.id === 'landing') {
                    document.body.classList.add('landing-bg', 'bg-transparent');
                    document.body.classList.remove('bg-bg-main');
                } else {
                    document.body.classList.remove('landing-bg', 'bg-transparent');
                    document.body.classList.add('bg-bg-main');
                }

                switch (currentView.id) {
                    case 'landing': renderLandingView(); break;
                    case 'home': renderHomeView(); break;
                    case 'sub_category': renderSubCategoryView(currentView.data); break;
                    case 'map': renderMapView(currentView.data); break;
                    case 'route': renderRouteView(currentView.data); break;
                    case 'category': renderCategoryView(currentView.data); break;
                    case 'detail': renderDetailView(currentView.data); break;
                    default: renderLandingView();
                }
                updateNavigation(currentView.id, currentView.data);
            }
        }

        function updateNavigation(viewId, data) {
            if (viewId === 'landing') {
                navTitle.textContent = "æµ·å±±ç”Ÿæ…‹åšç‰©é¤¨";
                backBtn.classList.add('hidden');
                historyStack = [];
            } else if (viewId === 'home') {
                navTitle.textContent = "æµ·å±±ç”Ÿæ…‹åšç‰©é¤¨ï¼å¾é¦™å±±è»Šç«™å‡ºç™¼";
                backBtn.classList.add('hidden'); 
            } else if (viewId === 'sub_category') {
                navTitle.textContent = `${data.categoryName} - å°è¦½é¸å–®`;
                backBtn.classList.remove('hidden');
            } else if (viewId === 'map' || viewId === 'route') {
                navTitle.textContent = `${data.categoryName} - ${data.subCategoryName}`;
                backBtn.classList.remove('hidden');
            } else if (viewId === 'category') {
                navTitle.textContent = data.subCategoryName ? `${data.subCategoryName} åœ°é»åˆ—è¡¨` : data.categoryName;
                backBtn.classList.remove('hidden');
            } else if (viewId === 'detail') {
                navTitle.textContent = data.locationName;
                backBtn.classList.remove('hidden');
            }
        }

        function renderLandingView() {
            appContent.classList.add('flex', 'items-center', 'justify-center', 'h-full');
            // ç‚ºé¦–é å…§å®¹æ·»åŠ åŠé€æ˜èƒŒæ™¯ï¼Œç¢ºä¿åœ¨èƒŒæ™¯åœ–ä¸Šæ–‡å­—æ¸…æ™°
            const content = `
                <header class="text-center p-8 rounded-2xl bg-bg-card/90 backdrop-blur-sm shadow-2xl">
                    <h1 class="text-5xl sm:text-6xl font-extrabold text-primary mb-6">æµ·å±±ç”Ÿæ…‹åšç‰©é¤¨</h1>
                    <p class="text-xl text-secondary mb-12">æ¢ç´¢é¦™å±±åœ°å€è±å¯Œçš„ç”Ÿæ…‹ã€æ­·å²èˆ‡äººæ–‡è„ˆçµ¡ã€‚</p>
                    <button onclick="navigateTo('home')" class="inline-flex items-center py-4 px-10 text-xl font-bold rounded-full shadow-2xl text-bg-main bg-primary hover:bg-emerald-500 transition duration-300 transform hover:scale-[1.05] active:scale-100 ring-4 ring-primary/50 ring-offset-bg-card ring-offset-2">
                        å¾é¦™å±±è»Šç«™å‡ºç™¼
                        <svg class="h-6 w-6 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"></path></svg>
                    </button>
                </header>
            `;
            appContent.insertAdjacentHTML('beforeend', content);
        }
        
        function renderHomeView() {
            const header = `
                <header class="text-center mb-12">
                    <h1 class="text-4xl sm:text-5xl font-extrabold text-primary mb-2">é¸æ“‡æƒ³è¦çš„ä¸»é¡Œ</h1>
                    <p class="text-lg text-secondary">é»æ“Šä¸»é¡Œå¡ç‰‡ï¼Œæ·±å…¥æ¢ç´¢æµ·å±±ç”Ÿæ…‹åšç‰©é¤¨çš„æ ¸å¿ƒåƒ¹å€¼ã€‚</p>
                </header>
            `;
            appContent.insertAdjacentHTML('beforeend', header);

            const categories = Object.keys(MUSEUM_DATA);
            const categorySection = document.createElement('div');
            categorySection.className = 'grid grid-cols-1 md:grid-cols-2 gap-8 mb-16';

            categories.forEach(category => {
                const icon = CATEGORY_ICONS[category] || '';
                const button = document.createElement('button');
                button.className = 'flex flex-col items-center justify-center p-8 text-center rounded-2xl shadow-xl border-t-8 border-primary bg-bg-light-card text-text-dark hover:bg-gray-200 transition duration-300 transform hover:scale-[1.03] active:scale-100';
                button.innerHTML = `<div class="text-primary mb-3">${icon}</div><span class="text-2xl font-bold">${category}</span><p class="text-base text-gray-600 mt-1">é»æ“Šé€²å…¥ ${category} ä¸»é¡Œ</p>`;
                
                button.onclick = () => {
                    if (category === 'æµ·èˆ‡ç”Ÿæ´»') {
                        navigateTo('sub_category', { categoryName: category });
                    } else {
                        navigateTo('category', { categoryName: category });
                    }
                };
                categorySection.appendChild(button);
            });
            appContent.appendChild(categorySection);

            const visitSection = `
                <section class="p-8 bg-accent/70 rounded-2xl text-text-light shadow-2xl">
                    <h2 class="text-2xl font-bold mb-6 text-center border-b border-text-light/30 pb-3">åƒè§€æ–¹å¼</h2>
                    <ul class="flex flex-wrap justify-center sm:justify-around items-start space-y-4 sm:space-y-0 sm:space-x-4 text-center">
                        <li class="flex-1 min-w-[120px] p-2 hover:bg-bg-card/20 rounded-lg transition duration-200"><div class="text-4xl mb-2">ğŸš²</div><p class="text-base font-semibold">è…³è¸è»Š</p></li>
                        <li class="flex-1 min-w-[120px] p-2 hover:bg-bg-card/20 rounded-lg transition duration-200"><div class="text-4xl mb-2">ğŸš¶</div><p class="text-base font-semibold">æ­¥è¡Œ</p></li>
                        <li class="flex-1 min-w-[120px] p-2 hover:bg-bg-card/20 rounded-lg transition duration-200"><div class="text-4xl mb-2">ğŸ‘¨â€ğŸ«</div><p class="text-base font-semibold">å°ˆäººå°è¦½</p></li>
                    </ul>
                </section>
            `;
            appContent.insertAdjacentHTML('beforeend', visitSection);
        }

        function renderSubCategoryView(data) {
            const { categoryName } = data;
            const subCategories = SUB_CATEGORIES_HAISHAN;
            const header = `<header class="mb-10"><h1 class="text-3xl font-extrabold text-text-light mb-2">${categoryName} å°è¦½é¸å–®</h1><p class="text-lg text-secondary">è«‹é¸æ“‡æ‚¨æƒ³é€²è¡Œçš„æ¢ç´¢æ–¹å¼ã€‚</p></header>`;
            appContent.insertAdjacentHTML('beforeend', header);

            const listContainer = document.createElement('div');
            listContainer.className = 'space-y-6';

            const subIcons = {
                "åœ°åœ–": `<svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.828 0l-4.243-4.243a8 8 0 1111.314 0z"/><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"/></svg>`,
                "è·¯ç·šè¦åŠƒ": `<svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.828 0l-4.243-4.243a8 8 0 1111.314 0z"/><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"/></svg>`,
                "è¨˜æ†¶æ•…äº‹": `<svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13M3.24 18.253h17.52M12 6.253a4 4 4 0 100 8 4 4 4 0 000-8zM7 21h10"/></svg>`
            };

            Object.keys(subCategories).forEach(subCategory => {
                const targetView = subCategories[subCategory];
                const button = document.createElement('button');
                button.className = 'flex items-center w-full p-5 text-left text-xl font-bold rounded-xl shadow-lg border-l-8 border-accent bg-bg-light-card text-text-dark hover:bg-accent/20 transition duration-200 transform hover:scale-[1.01]';
                button.innerHTML = `<div class="text-accent mr-4 p-2 rounded-full bg-accent/10">${subIcons[subCategory]}</div><span>${subCategory}</span><svg class="h-6 w-6 ml-auto text-accent" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>`;

                if (targetView === 'memory_stories') {
                    button.onclick = () => navigateTo('category', { categoryName: categoryName, subCategoryName: subCategory });
                } else {
                    button.onclick = () => navigateTo(targetView, { categoryName: categoryName, subCategoryName: subCategory });
                }
                listContainer.appendChild(button);
            });
            appContent.appendChild(listContainer);
        }

        // Map View - åµŒå…¥ Google Maps Iframe
        function renderMapView(data) {
            const { categoryName, subCategoryName } = data;
            const content = `
                <header class="mb-8 border-b-2 border-primary/50 pb-4"><h1 class="text-4xl font-extrabold text-primary mb-2">${subCategoryName}</h1><p class="text-lg text-secondary font-medium">ä¸»é¡Œï¼š${categoryName}</p></header>
                <div class="text-lg leading-relaxed text-secondary space-y-6">
                    <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d116315.65775432021!2d120.91698650000001!3d24.84716155!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x34685e1b21239c4d%3A0x8683c3486c4f305!2z5paw5puy5rW35bGx6a-s56ef!5e0!3m2!1szh-TW!2stw!4v1701700000000!5m2!1szh-TW!2stw" 
                            width="100%" height="384" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade" 
                            class="rounded-xl shadow-2xl border-4 border-primary/50"></iframe>
                    <p class="p-4 bg-accent/10 border-l-4 border-accent rounded-xl italic text-base shadow-sm text-text-light">æ­¤è™•é¡¯ç¤ºçš„æ˜¯æ–°ç«¹å¸‚é¦™å±±å€çš„æ¦‚ç•¥åœ°åœ–ï¼Œæ‚¨å¯ä»¥æ”¾å¤§ç¸®å°æˆ–é»æ“Šã€ŒæŸ¥çœ‹å¤§åœ–ã€é€²è¡Œäº’å‹•ã€‚</p>
                </div>`;
            appContent.insertAdjacentHTML('beforeend', content);
        }

        // è·¯ç·šæŒ‰éˆ•è¼”åŠ©å‡½å¼
        function renderRouteButton(label, emoji) {
            return `
                <button onclick="displayRouteDetails('${label}')" class="flex flex-col items-center p-3 sm:p-5 rounded-xl text-center bg-primary/20 hover:bg-primary/40 text-primary transition duration-200 transform hover:scale-105 shadow-md">
                    <span class="text-3xl sm:text-4xl">${emoji}</span>
                    <span class="text-sm sm:text-lg font-bold mt-1">${label}</span>
                </button>
            `;
        }

        // é¡¯ç¤ºè·¯ç·šè©³æƒ…å‡½å¼
        function displayRouteDetails(type) {
            const resultDiv = document.getElementById('route-result');
            let details = '';
            
            // ç§»é™¤æ‰€æœ‰æŒ‰éˆ•çš„ active æ¨£å¼
            document.querySelectorAll('.grid-cols-3 button').forEach(btn => {
                btn.classList.remove('bg-primary', 'text-bg-main');
                btn.classList.add('bg-primary/20', 'text-primary');
            });

            // ç‚ºè¢«é»æ“Šçš„æŒ‰éˆ•æ·»åŠ  active æ¨£å¼ (éœ€å¾ event.currentTarget ç²å–)
            const clickedButton = event.currentTarget;
            if (clickedButton) {
                clickedButton.classList.add('bg-primary', 'text-bg-main');
                clickedButton.classList.remove('bg-primary/20', 'text-primary');
            }


            switch(type) {
                case 'æ­¥è¡Œ':
                    details = `<div class="p-4">
                               <p class="text-2xl font-bold mb-2 text-text-dark">ğŸš¶ æ­¥è¡Œè·¯ç·šå»ºè­°</p>
                               <p>å»ºè­°è·¯ç·šé•·åº¦ç´„ 5 å…¬é‡Œï¼Œéœ€æ™‚ç´„ 1.5 - 2 å°æ™‚ã€‚ä¸»è¦ä¸²è¯é¦™å±±è»Šç«™ã€æ°´è“®å®®ã€æµ·å±±æ¼æ¸¯åŠé¦™å±±æ¿•åœ°æ­¥é“ã€‚é©åˆå–œæ­¡æ·±åº¦æ¼«éŠçš„éŠå®¢ã€‚</p>
                               <p class="mt-2 text-sm text-secondary/80">é©åˆæ™‚é–“ï¼šæ—©ä¸Šæˆ–å‚æ™šï¼Œé¿é–‹ä¸­åˆçƒˆæ—¥ã€‚</p>
                               </div>`;
                    break;
                case 'è…³è¸è»Š':
                    details = `<div class="p-4">
                               <p class="text-2xl font-bold mb-2 text-text-dark">ğŸš² è…³è¸è»Šè·¯ç·šå»ºè­°</p>
                               <p>å»ºè­°è·¯ç·šé•·åº¦ç´„ 12 å…¬é‡Œï¼Œéœ€æ™‚ç´„ 1 å°æ™‚ã€‚å¯æ²¿è‘—æµ·å²¸è‡ªè¡Œè»Šé“ï¼Œä¸²è¯æ¼æ¸¯ã€æ¿•åœ°èˆ‡éƒ¨åˆ†ç”¢æ¥­é»ã€‚è·¯æ³å¹³å¦ï¼Œæ©Ÿå‹•æ€§é«˜ã€‚</p>
                               <p class="mt-2 text-sm text-secondary/80">è«‹æ³¨æ„ï¼šéƒ¨åˆ†æ¿•åœ°æ­¥é“ç¦æ­¢è‡ªè¡Œè»Šé€²å…¥ã€‚</p>
                               </div>`;
                    break;
                case 'å°ˆäººè§£èªª':
                    details = `<div class="p-4">
                               <p class="text-2xl font-bold mb-2 text-text-dark">ğŸ‘¨â€ğŸ« å°ˆäººè§£èªªæœå‹™</p>
                               <p>è«‹æ´½è©¢åœ¨åœ°ã€Œç™¼å±•å”æœƒä¸­å¿ƒã€é ç´„å°ˆäººå°è¦½æœå‹™ (ç´„ 3 å°æ™‚è¡Œç¨‹)ã€‚å°è¦½å“¡å°‡å¸¶é ˜æ‚¨æ·±å…¥äº†è§£åœ¨åœ°æ­·å²èˆ‡ç”Ÿæ…‹æ•…äº‹ã€‚</p>
                               <p class="mt-2 text-sm text-secondary/80">éœ€æå‰é ç´„ï¼Œæ”¶è²»è«‹ä¾å”æœƒå…¬å‘Šç‚ºä¸»ã€‚</p>
                               </div>`;
                    break;
                default:
                    details = `<p class="text-secondary">é»æ“Šä¸Šæ–¹é¸é …ï¼ŒæŸ¥çœ‹å»ºè­°çš„è·¯ç·šè³‡è¨Šã€‚</p>`;
            }

            resultDiv.innerHTML = details;
        }

        // Route View - å¢åŠ ä¸‰å€‹äº¤é€šæ–¹å¼æŒ‰éˆ•å’Œçµæœå€
        function renderRouteView(data) {
            const { categoryName, subCategoryName } = data;
            const content = `
                <header class="mb-8 border-b-2 border-primary/50 pb-4"><h1 class="text-4xl font-extrabold text-primary mb-2">${subCategoryName}</h1><p class="text-lg text-secondary font-medium">ä¸»é¡Œï¼š${categoryName} | è«‹é¸æ“‡æ‚¨çš„äº¤é€šæ–¹å¼ã€‚</p></header>
                
                <div class="grid grid-cols-3 gap-4 mb-8">
                    ${renderRouteButton('æ­¥è¡Œ', 'ğŸš¶')}
                    ${renderRouteButton('è…³è¸è»Š', 'ğŸš²')}
                    ${renderRouteButton('å°ˆäººè§£èªª', 'ğŸ‘¨â€ğŸ«')}
                </div>

                <div id="route-result" class="p-6 bg-bg-light-card rounded-xl text-text-dark min-h-[150px] shadow-inner flex items-center justify-center">
                    <p class="text-secondary">é»æ“Šä¸Šæ–¹é¸é …ï¼ŒæŸ¥çœ‹å»ºè­°çš„è·¯ç·šè³‡è¨Šã€‚</p>
                </div>
            `;
            appContent.insertAdjacentHTML('beforeend', content);
        }

        function renderCategoryView(data) {
            const { categoryName, subCategoryName } = data;
            const locations = MUSEUM_DATA[categoryName] || {};
            const title = subCategoryName ? `${subCategoryName} - åœ°é»åˆ—è¡¨` : categoryName;
            const subtitle = subCategoryName ? 'è«‹é¸æ“‡æ‚¨æƒ³äº†è§£çš„è¨˜æ†¶æ•…äº‹åœ°é»ã€‚' : 'è«‹é¸æ“‡æ‚¨æƒ³æ·±å…¥äº†è§£çš„åœ°é»æˆ–ä¸»é¡Œã€‚';
            
            const header = `<header class="mb-10"><h1 class="text-3xl font-extrabold text-text-light mb-2">${title}</h1><p class="text-lg text-secondary">${subtitle}</p></header>`;
            appContent.insertAdjacentHTML('beforeend', header);

            const listContainer = document.createElement('div');
            listContainer.className = 'space-y-4';

            Object.keys(locations).forEach(locationName => {
                const button = document.createElement('button');
                button.className = 'flex items-center justify-between w-full p-5 text-left text-xl font-semibold rounded-xl shadow-md border border-gray-300 bg-bg-light-card text-text-dark hover:bg-gray-200 hover:border-accent transition duration-200 transform hover:translate-x-1';
                button.innerHTML = `<span>${locationName}</span><svg class="h-6 w-6 ml-2 text-accent" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path></svg>`;
                button.onclick = () => navigateTo('detail', { categoryName, locationName, detail: locations[locationName] });
                listContainer.appendChild(button);
            });
            appContent.appendChild(listContainer);
        }

        function renderDetailView(data) {
            const { locationName, detail } = data;
            
            let imageHtml = '';
            let imageUrl = '';
            let hasLocalImage = false;
            
            // è¨­å®šæ‚¨çš„æœ¬åœ°åœ–ç‰‡è·¯å¾‘ 
            if (locationName === 'æµ·å±±æ¼æ¸¯') {
                imageUrl = './IMG_8277.jpg'; // ä½¿ç”¨æ‚¨æä¾›çš„é¢¨è»Šåœ–ç‰‡
                hasLocalImage = true;
            } else if (locationName === 'å®šç½®æ¼å ´') {
                imageUrl = './IMG_0030.jpg'; // ä½¿ç”¨æ‚¨æä¾›çš„é­šå¸‚å ´åœ–ç‰‡
                hasLocalImage = true;
            }

            if (hasLocalImage) {
                // åœ–ç‰‡å¡«æ»¿å®¹å™¨ä¸”å¾é ‚éƒ¨é–‹å§‹é¡¯ç¤ºï¼Œè®“åœ–ç‰‡çš„ä¸‹åŠéƒ¨éœ²å‡ºä¾†
                imageHtml = `
                    <div class="h-72 rounded-xl overflow-hidden shadow-lg border border-gray-700 bg-gray-900 flex items-center justify-center">
                        <img src="${imageUrl}" alt="${locationName} ç›¸é—œåœ–ç‰‡" 
                             class="w-full h-full img-cover-fill" 
                             onerror="this.parentElement.innerHTML='<div class=\'w-full h-full flex flex-col items-center justify-center text-center p-4 bg-gray-800 text-gray-400\'><p class=\'text-xl font-bold mb-2\'>åœ–ç‰‡é è¦½</p><p>ä¸‹è¼‰ç¶²é ä¸¦å°‡åœ–ç‰‡ (${imageUrl})<br>æ”¾å…¥è³‡æ–™å¤¾å¾Œï¼Œé€™è£¡å°±æœƒé¡¯ç¤ºç…§ç‰‡ï¼</p></div>'">
                    </div>
                `;
            } else {
                imageHtml = `<div class="h-48 bg-gray-700 rounded-xl flex items-center justify-center text-gray-400 font-semibold text-xl shadow-inner border border-gray-600">[åœ°é»ç…§ç‰‡]</div>`;
            }

            const content = `
                <header class="mb-8 border-b-2 border-primary/50 pb-4">
                    <h1 class="text-4xl font-extragold text-primary mb-2">${locationName}</h1>
                    <p class="text-lg text-secondary font-medium">ä¸»é¡Œåˆ†é¡ï¼š${data.categoryName}</p>
                </header>

                <div class="text-lg leading-relaxed text-secondary space-y-6">
                    ${imageHtml}
                    <h2 class="text-2xl font-bold text-text-light pt-4 border-t border-gray-700">åœ°é»ä»‹ç´¹</h2>
                    <p class="text-text-light">${detail}</p>
                    <div class="p-4 bg-yellow-900/30 border-l-4 border-yellow-600 rounded-xl italic text-base shadow-sm">
                        <p class="font-semibold text-yellow-300 mb-1">ğŸ’¡ ç·¨è¼¯æç¤ºï¼š</p>
                        <p class="text-yellow-400">æ‚¨å¯ä»¥ç·¨è¼¯ç¨‹å¼ç¢¼ä¸­çš„ "MUSEUM_DATA" ä¾†ä¿®æ”¹é€™æ®µä»‹ç´¹æ–‡å­—ã€‚</p>
                    </div>
                </div>
            `;
            appContent.insertAdjacentHTML('beforeend', content);
        }

        document.addEventListener('DOMContentLoaded', () => {
            navigateTo('landing');
        });
    </script>
</body>
</html>
